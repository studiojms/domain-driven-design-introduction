<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="description" content="Apresentação sobre DDD: Domain Driven Design" />
    <meta name="author" content="Jefferson Mariano de Souza" />

    <title>DDD - Domain Driven Design</title>

    <link rel="stylesheet" href="assets/reset.css" />
    <link rel="stylesheet" href="assets/reveal.css" />
    <link rel="stylesheet" href="assets/theme/league.css" id="theme" />
    <!-- <link rel="stylesheet" href="assets/theme/black.css" id="theme"> -->

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="assets/plugin/highlight/monokai.css" id="highlight-theme" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-background="img/ddd-embratel.jpeg" data-background-opacity="0.3">
          <h2>Domain Driven Design</h2>
          <br />
          <p>Jefferson Mariano de Souza</p>
        </section>
        <section data-background="img/filosofia.jpg" data-background-opacity="0.3">
          <h2>Definição</h2>

          <section>
            <ul>
              <li class="fragment fade-up">abordagem arquitetural</li>
              <li class="fragment fade-up">forma de diminuir a complexidade do coração do sistema</li>
              <li class="fragment fade-up">delimitar contextos</li>
              <li class="fragment fade-up">lado mais filosófico do que técnico</li>
            </ul>
            <aside class="notes">* forma de pensar, idealizar, desenhar e desenvolver uma aplicação</aside>
          </section>
          <section>
            <h3>forma de diminuir a complexidade do coração do sistema</h3>
            <ul>
              <li class="fragment fade-up">resolver o problema do negócio</li>
              <li class="fragment fade-up">resolver a parte principal do sistema</li>
            </ul>
          </section>
          <section>
            <ul>
              <li>utiliza diversos design patterns, mas não está acoplado a nenhum</li>
              <li class="fragment fade-up">Não se trata apenas de criar camadas, entidades, repositórios etc</li>
              <li class="fragment fade-up">Design guiado pelo domínio (razão da aplicação existir)</li>
            </ul>
            <aside class="notes">
              <h4>Problemas que DDD resolve</h4>
              <ul>
                <li>construir software focando no problema de negócio e não problema tecnológico</li>
                <li>
                  Quando há problemas, o problema do software é por causa do negócio ou por causa da tecnologia
                  escolhida?
                </li>
              </ul>
            </aside>
          </section>
        </section>
        <section data-background="img/ddd-no-background.png" data-background-opacity="0.1">
          <section>
            <h2>História</h2>
            <p class="fragment fade-up">Criado em 2003, por Eric Evans</p>

            <q class="fragment fade-up">DDD é algo mutável, pode evoluir com o passar do tempo</q>
          </section>
          <section>
            <img class="r-stretch" src="img/ddd-book.jpg" height="600" />
          </section>
        </section>
        <section data-background="img/complex.jpg" data-background-opacity="0.1">
          <h2>Quando usar?</h2>
          <ul>
            <li class="fragment fade-up">aplicações complexas</li>
            <li class="fragment fade-up">sistemas que uma decisão errada pode impactar o projeto inteiro</li>
          </ul>
          <aside class="notes">
            <ul>
              <li>Geralmente não se usa para aplicações pequenas. Não é para CRUD, para coisas simples.</li>
              <li>É recomendado para aplicações de larga escala: ERP, Sistema Fiscal, aplicações críticas etc</li>
            </ul>
          </aside>
        </section>
        <section data-background="img/business.jpg" data-background-opacity="0.2">
          <h2>Domínio</h2>
          <ul>
            <li class="fragment fade-up">o coração do negócio (razão do negócio existir)</li>
            <li class="fragment fade-up">tem base em um conjunto de ideias, conhecimento e processos</li>
            <li class="fragment fade-up">sem domínio, os processos auxiliares não tem muita utilidade</li>
          </ul>
          <aside class="notes">
            Netflix: De que adianta ter a parte de faturamento bem resolvida, se a parte principal, que é transmissão de
            vídeo, não funcionar?
          </aside>
        </section>
        <section data-background="img/problem.jpg" data-background-opacity="0.2">
          <h3>Para resolver o problema de negócio, não precisamos necessariamente de código</h3>
          <div class="fragment fade-up">Mas sim...</div>
        </section>
        <section data-background="img/comunicacao.jpg" data-background-opacity="0.2">
          <h2>Comunicação</h2>
          <section>
            <ul>
              <li class="fragment fade-up">conseguir falar com todos os envolvidos em uma mesma linguagem</li>
              <li class="fragment fade-up">conversar entre todas as áreas, com todos os envolvidos no problema</li>
            </ul>
          </section>
          <section>
            <img src="img/ubiquitous-1.png" />
            <aside class="notes">
              <ul>
                <li>
                  Cliente: Quando é uma operação interestadual, o destino tem que recolher DIFAL. Já no caso de
                  substituição tributária você precisa calcular o ICMS considerando a base de cálculo...
                </li>
                <li>
                  Dev: Vamos criar instâncias de cada classe para que os objetos reajam quando o observer iterar uma
                  lista
                </li>
              </ul>
            </aside>
          </section>
          <section>
            <h3>linguagem ubíqua</h3>
            <ul>
              <li class="fragment fade-up">é a linguagem falada no dia a dia no contexto da empresa</li>
              <li class="fragment fade-up">utiliza as terminologias da realidade do negócio</li>
              <li class="fragment fade-up">desenvolvedores precisam conhecer a fundo a linguagem do negócio</li>
              <li class="fragment fade-up">objetivo: conseguir modelar o sistema para representar o negócio real</li>
            </ul>
          </section>
          <section>
            <h3>linguagem ubíqua</h3>
            <div>Exemplo: O que é <q>Cliente</q>?</div>
            <ul>
              <li class="fragment fade-up">quem loga no sistema?</li>
              <li class="fragment fade-up">quem compra algum produto?</li>
              <li class="fragment fade-up">quem contrata um serviço?</li>
            </ul>
          </section>
          <section>
            <h3>linguagem ubíqua</h3>
            <img src="img/ubiquitous-2.png" />
          </section>
          <section>
            <h3 style="margin-top: 90px">Domain Expert</h3>
            <img class="r-stretch" src="img/expert.png" />
          </section>
          <section data-background="img/domain-expert.jpg" data-background-color="#000" data-background-opacity="0.4">
            <h3>Domain Expert</h3>
            <ul>
              <li>quem conhece profundamente o negócio</li>
              <li class="fragment fade-up">quem vive o dia a dia do negócio</li>
            </ul>
          </section>
        </section>
        <section data-background="img/ddd-color.jpg" data-background-opacity="0.2">
          <img src="img/ddd-car.jpg" class="r-frame" />
          <ul>
            <li>Com a comunicação em ordem</li>
            <li class="fragment fade-up">Domínio bem definido</li>
            <li class="fragment fade-up">o próximo passo é identificar subdomínios</li>
          </ul>
        </section>
        <section data-background="img/dominio.jpg" data-background-opacity="0.2">
          <h2>Identificar subdomínios</h2>
          <section>
            <p>Domínio é o core business, o coração do problema</p>
          </section>
          <section>
            <h3>Subdomínio</h3>
            <ul>
              <li class="fragment fade-up">subáreas do sistema que possuem complexidades e diversas regras</li>
              <li class="fragment fade-up">refle muito em como a empresa vai funcionar</li>
            </ul>
            <aside class="notes">
              ex: netflix
              <ul>
                <li>domínio principal: video</li>
                <li>sub domínio: negociar licenciamento com empresas (Warner, Paramount)</li>
                <li>sub domínio: fechar contratos</li>
                <li>sub domínio: transcoding do video</li>
              </ul>
            </aside>
          </section>
        </section>
        <section data-background="img/contexts.jpg" data-background-opacity="0.2">
          <h2>Identificar contextos da empresa</h2>
          <section>
            <ul>
              <li class="fragment fade-up">cada contexto tem sua própria forma, sua própria linguagem</li>
              <li class="fragment fade-up">as complexidades mudam de acordo com cada uma das áreas</li>
            </ul>
            <aside class="notes">
              <ul>
                <li>lugares que usam o mesmo nome para coisas diferentes</li>
                <li>ou coisas diferentes utilizando o mesmo nome</li>
              </ul>
            </aside>
          </section>
          <section>
            <img class="r-frame" src="img/bounded-context.jpg" alt="bounded context" />
          </section>
        </section>
        <section data-background="img/context-communication.jpg" data-background-opacity="0.2">
          <h2>Comunicação entre os contextos</h2>
          <section>
            <ul>
              <li class="fragment fade-up">
                apesar de cada contexto ser delimitado, geralmente um precisa se relacionar com o outro
              </li>
            </ul>
          </section>
          <section>
            <ul>
              <li>identificar quais são as partes do domínio principal</li>
              <li class="fragment fade-up">identificar quais são os domínios auxiliares</li>
              <li class="fragment fade-up">identificar relações entre os domínios</li>
            </ul>
          </section>
        </section>
        <section data-background="img/relationship.jpg" data-background-opacity="0.2">
          <h2>Mapa de contexto</h2>
          <section>
            <ul>
              <li class="fragment fade-up">mapa que detalha a relação entre os domínios</li>
              <li class="fragment fade-up">possibilita uma visão geral do sistema</li>
              <li class="fragment fade-up">separar os pontos de complexidade</li>
              <li class="fragment fade-up">identificar pontos auxiliares para o sistema</li>
              <li class="fragment fade-up">conseguir atacar o que realmente importa</li>
            </ul>
          </section>
          <section>
            <img
              class="r-frame"
              style="background-color: rgb(31 31 31 / 70%)"
              src="img/context-map.png"
              alt="Context Map"
            />
            <aside class="notes">
              <ul>
                <li>tipos de relações entre os contextos</li>
                <li>ex: sistema de pagamento (paypal, pagseguro)</li>
                <li>relação de conformidade: preciso de uma camada anti-corrupção ali</li>
              </ul>
            </aside>
          </section>
        </section>
        <section data-background="img/ddd-capa.jpg" data-background-opacity="0.2">
          <h2>Resumindo: Pilares do DDD</h2>
          <ul>
            <li class="fragment fade-up">linguagem ubíqua</li>
            <li class="fragment fade-up">
              contextos delimitados (bounded contexts) - até onde vai a reponsabilidade de cada parte do sistema
            </li>
            <li class="fragment fade-up">mapas de contexto - comunicação entre os contextos</li>
          </ul>
        </section>
        <section data-background="img/code.jpeg" data-background-opacity="0.2">
          <h2>E no código?</h2>
          <section>
            <ul>
              <li class="fragment fade-up">Entidades</li>
              <li class="fragment fade-up">Objetos de Valor</li>
              <li class="fragment fade-up">Agregações</li>
              <li class="fragment fade-up">Repositórios</li>
              <li class="fragment fade-up">Serviços</li>
            </ul>
          </section>
          <section>
            <ul>
              <li>tudo baseado na linguagem criada antes de chegar no código</li>
              <li class="fragment fade-up">só começa o código quando a complexidade for definida e entendida</li>
            </ul>
            <aside class="notes">
              <ul>
                <li>Dúvida: E como fica no processo do agile? A ideia é ser iterativo e incremental.</li>
                <li>Se eu fico só no domínio, não produzo código, não tenho entrega</li>
                <li>DDD viria antes de iniciar o código, aprendendo sobre o domínio</li>
              </ul>
            </aside>
          </section>
          <section data-background="img/effort.jpg" data-background-opacity="0.4">
            <ul>
              <li>A maior parte do esforço está na parte de entender a complexidade</li>
            </ul>
          </section>
        </section>
        <section data-background="img/dominio.jpg" data-background-opacity="0.2">
          <h2>Entidade</h2>
          <section>
            <ul>
              <li class="fragment fade-up">algo único no sistema, com representatividade no negócio</li>
              <li class="fragment fade-up">existe no sistema, pode mudar seu estado</li>
              <li class="fragment fade-up">
                este item geralmente possui um id (que não existe por existir, mas para diferenciar um do outro)
              </li>
              <li class="fragment fade-up">é um domínio rico, tem uma razão de existir</li>
            </ul>
            <aside class="notes">
              os mais puristas dizem que entidade não deveria ter os gets/sets, mas sim suas acoes (historicamente, a
              ideia de gets/sets vem de modelar o sistema com base no banco...)
            </aside>
          </section>
          <section>
            <ul>
              <li>Cada contexto tem suas próprias entidades</li>
              <li class="fragment fade-up">Posso ter a entidade "Cliente" em mais de um contexto</li>
              <li class="fragment fade-up">uma entidade pode aparecer em diversos contextos com nomes diferentes</li>
            </ul>
            <aside class="notes">
              <ul>
                <li>entidade é um domínio rico, tem uma razão de existir</li>
                <li>Video: filme -> alugar, mudar preco, dar um desconto</li>
                <li>
                  entidade não existe para ser persistida... persistencia é outro problema que acaba sendo resolvido (em
                  algumas linguagens) junto
                </li>
              </ul>
            </aside>
          </section>
          <section>
            <h3>Exemplo: Cadastro de usuário</h3>

            <h5>Qual o tipo de dado?</h5>
            <ul>
              <li class="fragment fade-up">nome</li>
              <li class="fragment fade-up">cpf</li>
              <li class="fragment fade-up">email</li>
            </ul>
            <aside class="notes">
              <ul>
                <li>tipo primitivo? (string, int etc)?</li>
              </ul>
            </aside>
          </section>
        </section>
        <section data-background="img/value.jpg" data-background-opacity="0.2">
          <h2>Objeto de Valor</h2>
          <ul>
            <li class="fragment fade-up">classe que não tem identidade única, é usada como auxiliar</li>
            <li class="fragment fade-up">(parar de usar tipos primitivos para tudo)</li>
            <li class="fragment fade-up">CPF -> possui validação própria</li>
            <li class="fragment fade-up">E-Mail -> possui validação própria</li>
          </ul>
        </section>
        <section data-background="img/value-objects.jpg">
          <aside class="notes">
            <ul>
              <li>Favorecer Objetos de Valor em vez de tipos primitivos</li>
            </ul>
          </aside>
        </section>
        <section data-background="img/motoboy.jpg" data-background-opacity="0.2">
          <h2>Aggregates</h2>
          <section>
            <ul>
              <li class="fragment fade-up">Relação Pedido x item</li>
              <li class="fragment fade-up">Pedido possui N itens</li>
              <li class="fragment fade-up">Item só existe se existir pedido</li>
            </ul>
            <aside class="notes">
              <ul>
                <li>Representa uma entidade múltipla, uma relação entre as entidades</li>
                <li>Ex: Sempre persiste o pedido e o item, nunca somente o item</li>
              </ul>
            </aside>
          </section>
          <section>
            <ul>
              <li>Pedido: Raiz, por onde o processo começa</li>
              <li class="fragment fade-up">Pedido: Root Aggregate</li>
            </ul>
          </section>
        </section>
        <section data-background="img/repository.jpeg" data-background-opacity="0.2">
          <h2>Repositório</h2>
          <section>
            <ul>
              <li class="fragment fade-up">Parte responsável por persistir as entidades</li>
              <li class="fragment fade-up">Geralmente existe apenas para o aggregate root</li>
              <li class="fragment fade-up">Ex: eu persisto o pedido, não o item</li>
            </ul>
          </section>
        </section>
        <section data-background="img/service.png" data-background-opacity="0.1">
          <h2>Service</h2>
          <ul>
            <li class="fragment fade-up">Operação que não é uma parte natural de uma Entidade ou Objeto de Valor</li>
            <li class="fragment fade-up">Geralmente relacionada a um conceito de domínio</li>
            <li class="fragment fade-up">É uma operação definida em termos de outros elementos do modelo</li>
            <li class="fragment fade-up">Geralmente é uma operação stateless</li>
          </ul>
          <aside class="notes">
            <ul>
              <li>Ações como processar pagamento</li>
              <li>É necessário se comunicar com o banco</li>
              <li>Aguardar processamento</li>
              <li>Marcar pedido como pago</li>
            </ul>
          </aside>
        </section>
        <section data-background="img/conclusao.jpg" data-background-opacity="0.2">
          <h2>Conclusão</h2>
          <ul>
            <li class="fragment fade-up">DDD é bastante amplo</li>
            <li class="fragment fade-up">Foco no negócio</li>
            <li class="fragment fade-up">Não se prende a uma tecnologia específica (não é framework da moda)</li>
            <li class="fragment fade-up">Não é só trabalhar com <code>services</code> e <code>repositories</code></li>
          </ul>
          <aside class="notes">Estes são alguns pontos de introdução sobre DDD, porém há muito mais</aside>
        </section>
        <section data-background="img/ddd-books-background.jpeg" data-background-opacity="0.2">
          <h2>Para saber mais</h2>
          <ul>
            <a
              href="https://www.amazon.com.br/dp/B00794TAUG"
              target="blank"
            >
              <li>Domain Driven Design - Eric Evans</li>
            </a>
            <a
              href="https://www.amazon.com.br/dp/B01JJSGE5S"
              target="blank"
            >
              <li>Domain Driven Design Distilled - Vernon Vaughn</li>
            </a>
          </ul>
        </section>
        <section data-background="img/ddd-diagram.png" data-background-opacity="0.15">
          <h1>Obrigado</h1>

          Apresentação disponível em:
          <a href="https://studiojms.github.io/domain-driven-design-introduction">https://studiojms.github.io/domain-driven-design-introduction</a>
        </section>
      </div>
    </div>
    <script src="assets/reveal.js"></script>
    <script src="assets/plugin/notes/notes.js"></script>
    <script src="assets/plugin/markdown/markdown.js"></script>
    <script src="assets/plugin/highlight/highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,
        transition: 'convex', // none/fade/slide/convex/concave/zoom

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      });
      Reveal.configure({ pdfSeparateFragments: false });
    </script>
  </body>
</html>
